<html>

<style>
	.imageBox {
		margin: 4px;
		width: 200px;
		height: 200px;
		background-color: lightgray;
		display: inline-block;
	}

	.imageBox > img {
		width: 100%;
		height: 100%
	}

	.containerContaier {
		width: 100%;
		height: 600px;
		overflow: scroll;
	}

	.containerContaier > div {
		min-height: 101%
	}
</style>

<body>
	
<div>
	Implement infinite scrolling from fetching image from this URL <br>
	https://i.picsum.photos/id/3/200/200.jpg
</div>
<div id="conConId" class="containerContaier">
	<div id="conId"></div>
</div>

<script>

function getRandomImage() {
	let imageId = Math.floor(Math.random()*100);
	return `https://i.picsum.photos/id/${imageId}/200/200.jpg`;
}

document.getElementById("conConId").onscroll = function() {
	if (this.scrollTop >= this.scrollHeight - this.clientHeight - 4) {
		for (let i = 0; i < 10; i++) appendImage();
	}
}

function appendImage() {
	let imageContainer = document.createElement("div");
	imageContainer.classList.add("imageBox");
	let imageEle = document.createElement("img");
	imageContainer.append(imageEle);
	imageEle.style.display = "none";
	imageEle.onload = function () {
		setTimeout(() => this.style.display = "block", 1000);
	}
	imageEle.src = getRandomImage()
	document.getElementById("conId").append(imageContainer);	
}
</script>

</body>
</html>
